<div>

  <div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-3">
      <mat-form-field>
        <mat-select [(ngModel)]="l1Name" placeholder="L1 Name" (selectionChange)="onl1NameChange()">
          <mat-option [value]="undefined"> </mat-option>
          <mat-option *ngFor="let row of capbilityl1Name" [value]="row">
            {{row}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="col-md-3">
      <mat-form-field>
        <mat-select [(ngModel)]="l2Name" placeholder="L2 Name">
          <mat-option [value]="undefined"> </mat-option>
          <mat-option *ngFor="let row of capbilityl2Name" [value]="row">
            {{row}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="col-md-3">
      <mat-form-field>
        <input type="text" (input)="onChangel3Name()" matInput [(ngModel)]="l3Name" placeholder="L3 Name">
      </mat-form-field>
    </div>
  </div>
  
  <div class="row" *ngFor="let row of capbilityl1Name; let i=index" style="padding: 15px;">
    <div class="col-md-12" *ngIf="(l1Name == undefined || l1Name == row) && getl1l2Keys(row).length > 0">
      <mat-card class="outerCard" #outerTooltip="matTooltip" matTooltip=" {{defintions.get(row)}}"  matTooltipPosition="left"  >
        <div class="outerDiv">
          <div>  <img class="outerImage" src="assets/Tranche.jpeg"> </div>
        </div>
        <mat-card-header> 
          <div mat-card class="example-header-image"></div>
          <mat-card-title> <b> {{row}}</b> </mat-card-title>
        </mat-card-header>
        <mat-card-content  style="margin-left: 22px;">
          <div class="row">
           
            <div [ngClass]="getClassMiddleCard(row,l1l2Name)" *ngFor="let l1l2Name of getl1l2Keys(row);"  >
              
              <div>
               
                <div>
                  <mat-card (mouseover)="outerTooltip.hide();" (mouseleave)="outerTooltip.show();" class="middleCard" style="padding: 6px;height: 188px;" #middleTooltip="matTooltip"  matTooltipPosition="left" matTooltip="{{defintions.get(l2Name)}}">
                    <div class="middleDiv">
                      <div>  <img class="middleImage" src="assets/Segment.jpeg"> </div>
                    </div>
                    
                  <mat-card-header style="justify-content: center;">
                    <div mat-card class="example-header-image"></div>
                    <mat-card-title> <b>{{l1l2Name}}  </b> </mat-card-title>
                  </mat-card-header>
                  <mat-card-content style="margin-left: 22px;" >
                    <div class="row">
                      
                      <div style="padding-top:1em;"  [ngClass]="getClassInnerCard(row,l1l2Name,l3Name)"
                        *ngFor="let l3Name of capbilityl2l3Name.get(l1l2Name);let index2=index">
                        
                        <mat-card  class="innerCard" (mouseover)="middleTooltip.hide();outerTooltip.hide();"  (mouseleave)="middleTooltip.show();outerTooltip.show();" style="padding: 3px;height: 35px;" #innerTooltip="matTooltip" matTooltip="{{defintions.get(l3Name)}}">
                          <div *ngIf="(i == 1 && index1 == 0 && (index2 == 0 || index2 == 2)); else innerdiv" class="innerDiv1">
                            <div style="position: absolute;">  <img class="innerImage" src="assets/Capability.JPG"> </div>
                          </div>
                          <ng-template #innerdiv>
                            <div class="innerDiv">
                              <div style="position: absolute;">  <img class="innerImage" src="assets/Capability.JPG"> </div>
                            </div>
                          </ng-template>
                         

                          <div><mat-card-content class="mat-card-content-modify"> {{l3Name}}  </mat-card-content></div>
                        </mat-card>
                      </div>
                     
                    </div>
					
                  </mat-card-content>
                </mat-card>
                </div>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

<style>
  .innerMatCard {
    position: relative;
    margin-left: 26px;
    margin-top: -31px;
    font-size: 10px;
  }

  .outerMatCard {
    display: inline-block;
    border: 12px solid #ffc107d6;
    height: 73px;
    position: absolute;
  }

  .outerl1MatCard {
    display: inline-block;
    border: 12px solid blue;
    height: 90px;
    position: absolute;
  }

  .wrapper {
    border: solid 1px;
    height: 75px;
    width: 135px;
  }

  .increasedwidth {
    flex: 0 0 37.333333% !important;
    max-width:  37.333333%  !important;
  }

  .margin-left-25 {
    margin-left: 25%;
  }

  .margin-left-33 {
    margin-left: 33%;
  }

  .margin-left-20 {
    margin-left: 20%;
  }

  .mat-card-content-modify {
    font-size: 10px;
    margin-left: 20px;
  }

  .mat-card-header .mat-card-title {
    margin-bottom: 0px;
  }

  .innerImage {
    vertical-align: middle;
    border-style: none;
    width: 20px;
    margin-top: 5px;
  }

  .innerDiv {
    position: absolute;
    background-color: #dfdf60;
    height: -15px;
    width: 22px;
    height: 100%;
    margin-left: -3px;
    margin-top: -3px !important;
    border-radius: 3px;
  }

  .innerDiv1 {
    position: absolute;
    background-color: #60df6a;
    height: -15px;
    width: 22px;
    height: 100%;
    margin-left: -3px;
    margin-top: -3px !important;
    border-radius: 3px;
  }

  .middleDiv {
    position: absolute;
    background-color: #b8b8b2;
    height: -15px;
    width: 22px;
    height: 100%;
    margin-left: -6px;
    margin-top: -6px !important;
    border-radius: 3px;
  }

  .middleImage {
    vertical-align: middle;
    border-style: none;
    width: 20px;
    margin-top: 88px;
    margin-left: 1px;
  }

  .innerCard {
    box-shadow: 1px 2px 1px -1px #dfdf60, 1px 1px 1px 0#dfdf60, 1px 1px 3px 0 #dfdf60;;
  }

  .middleCard {
    box-shadow: 0 2px 1px -1px #b8b8b2, 0 1px 1px 0#b8b8b2, 0 1px 3px 0 #b8b8b2;;
  }

  .outerCard {
    box-shadow: 0 2px 1px -1px #4b4c86, 0 1px 1px 0#4b4c86, 0 1px 3px -1 #4b4c86;;
  }

  .outerDiv {
    position: absolute;
    background-color: #4b4c86;
    height: -15px;
    width: 22px;
    height: 100%;
    margin-left: -15px;
    margin-top: -15px !important;
    border-radius: 3px;
  }

  .outerImage {
    vertical-align: middle;
    border-style: none;
    width: 20px;
    margin-top: 120px;
    margin-left: 1px;
  }
  .mat-card-header .mat-card-title {
    font-size: 15px !important;
  }
</style>
